<mat-card class="cardWithShadow">
  <mat-card-content>
    <!-- Header -->
    <div class="row m-b-24">
      <div class="col-sm-4 d-flex align-items-center">
        <h4 class="f-s-18 f-w-600">Contract #{{ contract?.id }}</h4>
      </div>
      <div class="col-sm-8 text-right">
        <button mat-stroked-button class="m-r-10" (click)="onBack()">
          Back to Contracts
        </button>
        <button mat-flat-button color="primary" (click)="onEdit()">
          Edit Contract
        </button>
      </div>
    </div>

    <mat-divider></mat-divider>

    <!-- Contract Status and Date -->
    <div class="row p-y-24">
      <div class="col-sm-6">
        <span class="f-w-600 f-s-15">Contract Status:</span>
        <h6 class="m-t-5 m-b-0 f-w-500 f-s-14">{{ contract?.status }}</h6>
      </div>
      <div class="col-sm-6 text-right">
        <span class="f-w-600 f-s-15">Sign Date:</span>
        <h6 class="m-t-5 m-b-0 f-w-500 f-s-14">
          {{ contract?.signDate | date : "fullDate" }}
        </h6>
      </div>
    </div>

    <mat-divider></mat-divider>

    <!-- Contract Details -->
    <div class="row p-y-24">
      <div class="col-sm-12">
        <span class="f-w-600 f-s-15">Contract Name:</span>
        <h6 class="m-t-5 m-b-0 f-w-500 f-s-14">{{ contract?.name }}</h6>
      </div>
    </div>

    <!-- Contract Items Table -->
    <div class="table-responsive">
      <table mat-table [dataSource]="contract?.items ?? []" class="w-100">
        <!-- Item Name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef class="f-s-15 f-w-600">
            Item Name
          </th>
          <td mat-cell *matCellDef="let item">{{ item.name }}</td>
        </ng-container>

        <!-- Unit Column -->
        <ng-container matColumnDef="unit">
          <th mat-header-cell *matHeaderCellDef class="f-s-15 f-w-600">Unit</th>
          <td mat-cell *matCellDef="let item">{{ item.unit }}</td>
        </ng-container>

        <!-- Price Column -->
        <ng-container matColumnDef="price">
          <th mat-header-cell *matHeaderCellDef class="f-s-15 f-w-600">
            Unit Price
          </th>
          <td mat-cell *matCellDef="let item">{{ item.price | currency }}</td>
        </ng-container>

        <!-- Quantity Column -->
        <ng-container matColumnDef="quantity">
          <th mat-header-cell *matHeaderCellDef class="f-s-15 f-w-600">
            Quantity
          </th>
          <td mat-cell *matCellDef="let item">{{ item.quantity }}</td>
        </ng-container>

        <!-- Total Column -->
        <ng-container matColumnDef="total">
          <th mat-header-cell *matHeaderCellDef class="f-s-15 f-w-600">
            Total
          </th>
          <td mat-cell *matCellDef="let item">{{ item.total | currency }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    </div>

    <!-- Totals -->
    <div class="text-right m-t-30">
      <h5 class="m-b-5 f-w-600 f-s-16">
        Sub total: {{ calculateSubTotal() | currency }}
      </h5>
      <span class="f-w-600 f-s-16">Tax: {{ taxRate }}%</span>
      <h3 class="m-b-0 b-t-1 p-t-20 f-s-18 m-t-24">
        Grand Total: {{ calculateTotal() | currency }}
      </h3>
    </div>
  </mat-card-content>
</mat-card>
